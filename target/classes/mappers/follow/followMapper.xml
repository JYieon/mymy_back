<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.trip.mymy.mybatis.FollowMapper">

    <resultMap id="FollowingResultMap" type="com.trip.mymy.dto.FollowingDTO">
	    <id property="followId" column="FOLLOW_ID_PK"/>
	    <result property="followerId" column="FOLLOWER_ID"/>
	    <result property="followingId" column="FOLLOWING_ID"/>
	    <result property="createdAt" column="CREATED_AT" jdbcType="TIMESTAMP"/>
	</resultMap>

	<resultMap id="FollowerResultMap" type="com.trip.mymy.dto.FollowerDTO">
    	<id property="followId" column="FOLLOW_ID_PK"/>
    	<result property="followerId" column="FOLLOWER_ID"/>
    	<result property="createdAt" column="CREATED_AT"/>
	</resultMap>


    <!-- 내가 팔로우하는 목록 조회 -->
    <select id="getFollowingList" resultMap="FollowingResultMap">
    	SELECT * 
    	FROM FOLLOW_TB 
    	WHERE FOLLOWER_ID = #{followerId}
	</select>


    <!-- 나를 팔로우하는 목록 조회 -->
    <select id="getFollowerList" resultMap="FollowerResultMap">
        SELECT *
        FROM FOLLOW_TB 
        WHERE FOLLOWING_ID = #{followingId}
    </select>
    
   <select id="isFollowing" resultType="boolean">
    	SELECT CASE WHEN COUNT(*) > 0 THEN TRUE ELSE FALSE END
    	FROM FOLLOW_TB
    	WHERE FOLLOWER_ID = #{followerId} AND FOLLOWING_ID = #{followingId}
	</select>


</mapper>
